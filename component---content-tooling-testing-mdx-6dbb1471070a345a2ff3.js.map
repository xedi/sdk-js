{"version":3,"sources":["webpack:///./content/tooling/testing.mdx","webpack:///./node_modules/@primer/gatsby-theme-doctocat/src/components/table-of-contents.js","webpack:///./node_modules/@primer/gatsby-theme-doctocat/src/components/layout.js"],"names":["_frontmatter","layoutProps","MDXLayout","DefaultLayout","MDXContent","components","props","mdxType","mr","to","parentName","href","as","scheme","issueId","isMDXComponent","listStyle","TableOfContents","items","depth","m","p","map","item","key","url","pl","display","py","color","title","defaultProps","zIndex","alignItems","alignSelf","gridArea","overflow","Layout","children","pageContext","frontmatter","description","status","source","additionalContributors","flexDirection","minHeight","flex","id","maxWidth","gridTemplateColumns","gridTemplateAreas","gridColumnGap","gridRowGap","mx","border","borderBottom","borderRadius","pb","tableOfContents","position","top","HEADER_HEIGHT","maxHeight","fontWeight","mb","open","pt","editUrl","contributors","concat","login"],"mappings":"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","file":"component---content-tooling-testing-mdx-6dbb1471070a345a2ff3.js","sourcesContent":["import * as React from 'react'\n  /* @jsx mdx */\nimport { mdx } from '@mdx-js/react';\n/* @jsx mdx */\n\nimport DefaultLayout from \"/Users/midders/Code/xedi-microservices/sdk-js/docs/node_modules/@primer/gatsby-theme-doctocat/src/components/layout.js\";\nimport { Text, Flash, BorderBox } from '@primer/components';\nimport { InfoIcon } from '@primer/styled-octicons';\nimport InlineCode from '@primer/gatsby-theme-doctocat/src/components/inline-code';\nimport { ExternalLink, GithubIssue } from '../../src/components';\nimport { Caption } from '@primer/gatsby-theme-doctocat';\nimport { Link } from 'gatsby';\nexport const _frontmatter = {};\n\nconst makeShortcode = name => function MDXDefaultShortcode(props) {\n  console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\");\n  return <div {...props} />;\n};\n\nconst layoutProps = {\n  _frontmatter\n};\nconst MDXLayout = DefaultLayout;\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n\n\n\n    <p>{`Testing our code often feels like a chore, or something we leave until last. For most, testing is the mashed potatoes of development. It makes up the majority of the task and isn't the most attractive thing on our plate.`}</p>\n    <p>{`In this section we'll look at using unit tests to test our code to provide confidence that any changes we make don't break other behaviours within the SDK.`}</p>\n    <Flash mdxType=\"Flash\">\n    <InfoIcon mr={2} mdxType=\"InfoIcon\" />\n    If you are looking for information on manual testing, read the <Link to=\"/tooling/debugging\" mdxType=\"Link\">debugging</Link> section.\n    </Flash>\n    <h2>{`Directory Structure`}</h2>\n    <p>{`Testing (at the time of writing) focuses on the behaviors of the SDK, rather than a broad spread approach. This maps to how the files and directories are structured. Rather than mimicking the `}<inlineCode parentName=\"p\">{`src`}</inlineCode>{` directory structure, the directories are structured based on the hierarchy at runtime. So for `}<inlineCode parentName=\"p\">{`Xedi.Auth`}</inlineCode>{`, you would find those tests in `}<inlineCode parentName=\"p\">{`tests/Unit/Auth`}</inlineCode>{` and so on.`}</p>\n    <p>{`Throughout this page, I will continue to use Marvel's Avengers as a subject material. I'm going to test an API that lists the members of the Avengers.`}</p>\n    <p>{`First I need a directory, so I will create `}<inlineCode parentName=\"p\">{`tests/Unit/Avengers`}</inlineCode>{`.`}</p>\n    <p>{`Next I need to test each function in my Avengers API. At present I have one function, `}<inlineCode parentName=\"p\">{`list()`}</inlineCode>{`, so I create `}<inlineCode parentName=\"p\">{`List.test.ts`}</inlineCode>{` in my `}<inlineCode parentName=\"p\">{`Avengers`}</inlineCode>{` directory.`}</p>\n    <h2>{`Authoring a test`}</h2>\n    <p>{`Once I have my file, I can start writing my test. Because we are using `}<ExternalLink href=\"https://mochajs.org/\" mdxType=\"ExternalLink\">{`MochaJS`}</ExternalLink>{` as a testing framework we get a couple of functions included by default.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-typescript\"\n      }}>{`import { assert } from 'chai';\nimport { Collection, Avenger } from '../../../src/Models/Models';\nimport Avengers from '../../../src/Services/Avengers';\nimport Axios, { AxiosInstance } from 'axios';\nimport Config from '../../../src/Config/Config;\nimport JsonResponse from '../../../src/Interfaces/JsonResponse;\nimport nock from 'nock';\n\ndescribe('Avengers@list', () => {\n    it('should return a list of avengers', async () => {\n        const positiveResponse: JsonResponse<Collection<Avenger>> = {\n            data: [\n                {\n                    \"_id\": 1,\n                    \"email\": \"t.stark@avengers.org\",\n                    \"first_name\": \"Anthony\",\n                    \"last_name\": \"Stark\",\n                    \"job_title\": \"Iron Man\"\n                },\n                {\n                    \"_id\": 2,\n                    \"email\": \"s.rogers@avengers.org\",\n                    \"first_name\": \"Steve\",\n                    \"last_name\": \"Rogers\",\n                    \"job_title\": \"Captain America\"\n                }\n            ]\n        };\n\n        nock(\"https://api.xedi.com\")\n            .get(\"/1/avengers\")\n            .reply(200, positiveResponse);\n\n        const configBag = new Config();\n        const httpClient: AxiosInstance = new Axios({\n            baseUrl: 'https://api.xedi.com'\n        });\n\n        const avengersAPI = new Avengers(configBag, httpClient);\n\n        const result = await avengersApi.list();\n\n        assert.isArray(result);\n        assert.lengthOf(result, 2);\n    });\n});\n`}</code></pre>\n    <Caption mdxType=\"Caption\">tests/Unit/Avengers/List.test.ts</Caption>\n    <p>{`Lets examine this test.`}</p>\n    <ul>\n      <li parentName=\"ul\">\n        <p parentName=\"li\">{`Below the `}<inlineCode parentName=\"p\">{`import`}</inlineCode>{` statements is the entrypoint for the framework. In this file we are describing the list functionality of the Avengers API. Therefore, `}<inlineCode parentName=\"p\">{`Avengers@list`}</inlineCode>{` is what will appear in the results output.`}</p>\n      </li>\n      <li parentName=\"ul\">\n        <p parentName=\"li\">{`We have one behavioural test, in which we assert `}<inlineCode parentName=\"p\">{`it should return a list of avengers`}</inlineCode>{`. Because this method contains an `}<Text as=\"em\" mdxType=\"Text\">{`asynchronous`}</Text>{` http request, we denote that the this test is also asynchronous with the `}<inlineCode parentName=\"p\">{`async`}</inlineCode>{` keyword.`}</p>\n      </li>\n      <li parentName=\"ul\">\n        <p parentName=\"li\">{`Personal preference, I have added a fixture at the top of the test. This could easily be done inline or in a separate file.`}</p>\n      </li>\n      <li parentName=\"ul\">\n        <p parentName=\"li\">{`We use `}<ExternalLink href=\"https://github.com/nock/nock\" mdxType=\"ExternalLink\">{`Nock`}</ExternalLink>{` to intercept requests to the API Gateway and return predefined responses to matching endpoints.`}</p>\n      </li>\n      <li parentName=\"ul\">\n        <p parentName=\"li\">{`We then need to setup our class. This concludes the the setup phase of our tests.`}</p>\n      </li>\n      <li parentName=\"ul\">\n        <p parentName=\"li\">{`We invoke the subject function `}<inlineCode parentName=\"p\">{`list()`}</inlineCode>{` and assign the response to a `}<inlineCode parentName=\"p\">{`const`}</inlineCode>{` value.`}</p>\n      </li>\n      <li parentName=\"ul\">\n        <p parentName=\"li\">{`We enter the assert phase, and utilize functions from `}<ExternalLink href=\"https://chaijs.com\" mdxType=\"ExternalLink\">{`Chai.js`}</ExternalLink>{` to test the response.`}</p>\n      </li>\n    </ul>\n    <Flash scheme=\"yellow\" mdxType=\"Flash\">\n    <InfoIcon mr={2} mdxType=\"InfoIcon\" />\n    It's important to remember that Mocha will pass any test that doesn't error. This is the primary reason I've used <InlineCode mdxType=\"InlineCode\">async/await</InlineCode> rather than <InlineCode mdxType=\"InlineCode\">then/catch</InlineCode>.\n    </Flash>\n    <h2>{`Running your test`}</h2>\n    <p>{`Now that I've written my test, lets see if it will run. Simply run: `}<InlineCode mdxType=\"InlineCode\">{`npm run test`}</InlineCode>{`.`}</p>\n    <p>{`I will also check my code conforms to best-practice. For this run: `}<InlineCode mdxType=\"InlineCode\">{`npm run lint:tests`}</InlineCode>{`. If you want to know more about this, read the section on `}<Link to=\"/tooling/linting\" mdxType=\"Link\">{`Linting`}</Link>{`.`}</p>\n    <h2>{`Coverage Reports`}</h2>\n    <BorderBox mdxType=\"BorderBox\">\n    <GithubIssue issueId=\"46\" mdxType=\"GithubIssue\" />\n    </BorderBox>\n\n    </MDXLayout>;\n}\n;\nMDXContent.isMDXComponent = true;\n      ","import {Box, Link} from '@primer/components'\nimport React from 'react'\n\nfunction TableOfContents({items, depth}) {\n  return (\n    <Box as=\"ul\" m={0} p={0} css={{listStyle: 'none'}}>\n      {items.map(item => (\n        <Box as=\"li\" key={item.url} pl={depth > 0 ? 3 : 0}>\n          <Link display=\"inline-block\" py={1} href={item.url} color=\"gray.6\">\n            {item.title}\n          </Link>\n          {item.items ? (\n            <TableOfContents items={item.items} depth={depth + 1} />\n          ) : null}\n        </Box>\n      ))}\n    </Box>\n  )\n}\n\nTableOfContents.defaultProps = {\n  depth: 0,\n}\n\nexport default TableOfContents\n","import {\n  BorderBox,\n  Box,\n  Details,\n  Flex,\n  Grid,\n  Heading,\n  Position,\n  Text,\n} from '@primer/components'\nimport {ChevronDownIcon, ChevronRightIcon} from '@primer/styled-octicons'\nimport React from 'react'\nimport Head from './head'\nimport Header, {HEADER_HEIGHT} from './header'\nimport PageFooter from './page-footer'\nimport Sidebar from './sidebar'\nimport SourceLink from './source-link'\nimport StatusLabel from './status-label'\nimport TableOfContents from './table-of-contents'\n\nfunction Layout({children, pageContext}) {\n  const {\n    title,\n    description,\n    status,\n    source,\n    additionalContributors = [],\n  } = pageContext.frontmatter\n\n  return (\n    <Flex flexDirection=\"column\" minHeight=\"100vh\">\n      <Head title={title} description={description} />\n      <Header />\n      <Flex flex=\"1 1 auto\" flexDirection=\"row\" css={{zIndex: 0}}>\n        <Box display={['none', null, null, 'block']}>\n          <Sidebar />\n        </Box>\n        <Grid\n          id=\"skip-nav\"\n          maxWidth=\"100%\"\n          gridTemplateColumns={['100%', null, 'minmax(0, 65ch) 220px']}\n          gridTemplateAreas={[\n            '\"heading\" \"content\"',\n            null,\n            '\"heading .\" \"content table-of-contents\"',\n          ]}\n          gridColumnGap={[null, null, 6, 7]}\n          gridRowGap={3}\n          mx=\"auto\"\n          p={[5, 6, null, 7]}\n          css={{alignItems: 'start', alignSelf: 'start'}}\n        >\n          <BorderBox\n            css={{gridArea: 'heading'}}\n            border={0}\n            borderBottom={1}\n            borderRadius={0}\n            pb={2}\n          >\n            <Heading>{title}</Heading>\n          </BorderBox>\n          {pageContext.tableOfContents.items ? (\n            <Position\n              display={['none', null, 'block']}\n              css={{gridArea: 'table-of-contents', overflow: 'auto'}}\n              position=\"sticky\"\n              top={HEADER_HEIGHT + 24}\n              maxHeight={`calc(100vh - ${HEADER_HEIGHT}px - 24px)`}\n            >\n              <Text display=\"inline-block\" fontWeight=\"bold\" mb={1}>\n                Table of contents\n              </Text>\n              <TableOfContents items={pageContext.tableOfContents.items} />\n            </Position>\n          ) : null}\n          <Box css={{gridArea: 'content'}}>\n            {status || source ? (\n              <Flex mb={3} alignItems=\"center\">\n                {status ? <StatusLabel status={status} /> : null}\n                <Box mx=\"auto\" />\n                {source ? <SourceLink href={source} /> : null}\n              </Flex>\n            ) : null}\n            {pageContext.tableOfContents.items ? (\n              <Box display={['block', null, 'none']} mb={3}>\n                <Details>\n                  {({open}) => (\n                    <>\n                      <Text as=\"summary\" fontWeight=\"bold\">\n                        {open ? (\n                          <ChevronDownIcon mr={2} />\n                        ) : (\n                          <ChevronRightIcon mr={2} />\n                        )}\n                        Table of contents\n                      </Text>\n                      <Box pt={1}>\n                        <TableOfContents\n                          items={pageContext.tableOfContents.items}\n                        />\n                      </Box>\n                    </>\n                  )}\n                </Details>\n              </Box>\n            ) : null}\n            {children}\n            <PageFooter\n              editUrl={pageContext.editUrl}\n              contributors={pageContext.contributors.concat(\n                additionalContributors.map((login) => ({login})),\n              )}\n            />\n          </Box>\n        </Grid>\n      </Flex>\n    </Flex>\n  )\n}\n\nexport default Layout\n"],"sourceRoot":""}