{"version":3,"sources":["webpack:///./content/architecture/authentication.mdx","webpack:///./node_modules/@primer/gatsby-theme-doctocat/src/components/table-of-contents.js","webpack:///./node_modules/@primer/gatsby-theme-doctocat/src/components/layout.js"],"names":["_frontmatter","layoutProps","MDXLayout","DefaultLayout","MDXContent","_ref","components","props","_objectWithoutPropertiesLoose","Object","_mdx_js_react__WEBPACK_IMPORTED_MODULE_6__","assign","mdxType","_src_components__WEBPACK_IMPORTED_MODULE_9__","href","_primer_components__WEBPACK_IMPORTED_MODULE_8__","as","parentName","issueId","isMDXComponent","listStyle","TableOfContents","items","depth","react_default","a","createElement","_StyledBox","m","p","map","item","index_esm","key","url","pl","display","py","color","title","defaultProps","zIndex","alignItems","alignSelf","gridArea","overflow","Layout","children","pageContext","_pageContext$frontmat","frontmatter","description","status","source","_pageContext$frontmat2","additionalContributors","flexDirection","minHeight","head","header","_StyledFlex","flex","sidebar","_StyledGrid","id","maxWidth","gridTemplateColumns","gridTemplateAreas","gridColumnGap","gridRowGap","mx","_StyledBorderBox","border","borderBottom","borderRadius","pb","tableOfContents","_StyledPosition","position","top","HEADER_HEIGHT","maxHeight","fontWeight","mb","table_of_contents","layout_StyledBox","status_label","source_link","_ref2","open","Fragment","dist_index_esm","mr","pt","page_footer","editUrl","contributors","concat","login"],"mappings":"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","file":"component---content-architecture-authentication-mdx-1f8ac45143695c0eba65.js","sourcesContent":["import * as React from 'react'\n  /* @jsx mdx */\nimport { mdx } from '@mdx-js/react';\n/* @jsx mdx */\n\nimport DefaultLayout from \"/Users/smudge/Code/Xedi/libraries/sdk/js/docs/node_modules/@primer/gatsby-theme-doctocat/src/components/layout.js\";\nimport { BorderBox, Text } from '@primer/components';\nimport { ExternalLink, GithubIssue } from '../../src/components';\nexport const _frontmatter = {};\n\nconst makeShortcode = name => function MDXDefaultShortcode(props) {\n  console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\");\n  return <div {...props} />;\n};\n\nconst layoutProps = {\n  _frontmatter\n};\nconst MDXLayout = DefaultLayout;\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n\n\n\n    <h2>{`Background`}</h2>\n    <h3>{`Rationale`}</h3>\n    <p>{`Security is of paramount importance. Customers trust XEDI with sensitive business data, and legislation such as the `}<ExternalLink href=\"http://www.legislation.gov.uk/ukpga/2018/12/contents/enacted\" mdxType=\"ExternalLink\">{`Data Protection Act 2018`}</ExternalLink>{` obligate XEDI to ensure the maximum possible security of data and best practices for access. For more information on these obligations, read `}<ExternalLink href=\"https://ico.org.uk/for-organisations/guide-to-data-protection/guide-to-the-general-data-protection-regulation-gdpr/\" mdxType=\"ExternalLink\">{`this guide from the Information Commissioners Office`}</ExternalLink>{`.`}</p>\n    <p>{`As part of these obligations, we've not only looked at current best practices, but also industry futures. Many names within the authentication tech-space are moving to using JWT tokens as part of the Open Authentication 2.0 standard. As such we have chosen JWT tokens as our defacto authentication mechanism.`}</p>\n    <h3>{`Tokens`}</h3>\n    <p>{`When you authenticate with an API Gateway, you will be provisioned two `}<ExternalLink href=\"https://tools.ietf.org/html/rfc7519\" mdxType=\"ExternalLink\">{`JWT tokens`}</ExternalLink>{`. These are known as short-life tokens and are considered to be more secure than traditional OAuth tokens.`}</p>\n    <p>{`The first token, the `}<Text as=\"em\" mdxType=\"Text\">{`Access Token`}</Text>{` is the token which should be sent in the `}<inlineCode parentName=\"p\">{`Authenticate`}</inlineCode>{` header using the `}<ExternalLink href=\"https://tools.ietf.org/html/rfc6750\" mdxType=\"ExternalLink\"><inlineCode parentName=\"p\">{`Bearer`}</inlineCode>{` scheme`}</ExternalLink>{`.`}</p>\n    <p>{`The second, and most important is the `}<Text as=\"em\" mdxType=\"Text\">{`Refresh Token`}</Text>{`. This should be kept safe and only used when prompted. As the name suggests it is used to securely generate new access tokens when your current one expires. To ensure this not subject to \"replay attacks\", refresh tokens are single use. Once it is used, it is revoked and a new one issued.`}</p>\n    <p>{`For extra security, our tokens are also encrypted. This means that the signature part of the token is encrypted using 4096-bit encryption. The signature hashes the payload and headers of the token, which prevents the token from being manipulated by a third-party.`}</p>\n    <h2>{`Token Lifecycle`}</h2>\n    <BorderBox mdxType=\"BorderBox\">\n    <GithubIssue issueId=\"30\" mdxType=\"GithubIssue\" />\n    </BorderBox>\n    <ul>\n      <li parentName=\"ul\">{`One authenticated successfully, access and refresh tokens will be issued to the user.`}</li>\n      <li parentName=\"ul\">{`The user should use the access token in the `}<inlineCode parentName=\"li\">{`Authenticate`}</inlineCode>{` header for every request.`}</li>\n      <li parentName=\"ul\">{`When the access token expires, any request it is used with will respond with a `}<inlineCode parentName=\"li\">{`401 Not Authorized`}</inlineCode>{` error.`}<ul parentName=\"li\">\n          <li parentName=\"ul\">{`Within the responses headers will be the `}<inlineCode parentName=\"li\">{`WWW-Authenticate`}</inlineCode>{` header providing detail of the error.`}<ul parentName=\"li\">\n              <li parentName=\"ul\">{`If the token is expired, the refresh token should be sent to `}<inlineCode parentName=\"li\">{`1/api/auth/token`}</inlineCode>{` using the `}<inlineCode parentName=\"li\">{`POST`}</inlineCode>{` verb.`}</li>\n              <li parentName=\"ul\">{`If the token is invalid, the refresh token should be sent to `}<inlineCode parentName=\"li\">{`1/api/auth/token`}</inlineCode>{` using the `}<inlineCode parentName=\"li\">{`POST`}</inlineCode>{` verb.`}</li>\n              <li parentName=\"ul\">{`New tokens will be issued to the user if the refresh token is valid.`}</li>\n            </ul></li>\n        </ul></li>\n      <li parentName=\"ul\">{`If the refresh token itself is invalid, expired or revoked, the user should re-authenticate.`}</li>\n    </ul>\n\n    </MDXLayout>;\n}\n;\nMDXContent.isMDXComponent = true;\n      ","import {Box, Link} from '@primer/components'\nimport React from 'react'\n\nfunction TableOfContents({items, depth}) {\n  return (\n    <Box as=\"ul\" m={0} p={0} css={{listStyle: 'none'}}>\n      {items.map(item => (\n        <Box as=\"li\" key={item.url} pl={depth > 0 ? 3 : 0}>\n          <Link display=\"inline-block\" py={1} href={item.url} color=\"gray.6\">\n            {item.title}\n          </Link>\n          {item.items ? (\n            <TableOfContents items={item.items} depth={depth + 1} />\n          ) : null}\n        </Box>\n      ))}\n    </Box>\n  )\n}\n\nTableOfContents.defaultProps = {\n  depth: 0,\n}\n\nexport default TableOfContents\n","import {\n  BorderBox,\n  Box,\n  Details,\n  Flex,\n  Grid,\n  Heading,\n  Position,\n  Text,\n} from '@primer/components'\nimport {ChevronDownIcon, ChevronRightIcon} from '@primer/styled-octicons'\nimport React from 'react'\nimport Head from './head'\nimport Header, {HEADER_HEIGHT} from './header'\nimport PageFooter from './page-footer'\nimport Sidebar from './sidebar'\nimport SourceLink from './source-link'\nimport StatusLabel from './status-label'\nimport TableOfContents from './table-of-contents'\n\nfunction Layout({children, pageContext}) {\n  const {\n    title,\n    description,\n    status,\n    source,\n    additionalContributors = [],\n  } = pageContext.frontmatter\n\n  return (\n    <Flex flexDirection=\"column\" minHeight=\"100vh\">\n      <Head title={title} description={description} />\n      <Header />\n      <Flex flex=\"1 1 auto\" flexDirection=\"row\" css={{zIndex: 0}}>\n        <Box display={['none', null, null, 'block']}>\n          <Sidebar />\n        </Box>\n        <Grid\n          id=\"skip-nav\"\n          maxWidth=\"100%\"\n          gridTemplateColumns={['100%', null, 'minmax(0, 65ch) 220px']}\n          gridTemplateAreas={[\n            '\"heading\" \"content\"',\n            null,\n            '\"heading .\" \"content table-of-contents\"',\n          ]}\n          gridColumnGap={[null, null, 6, 7]}\n          gridRowGap={3}\n          mx=\"auto\"\n          p={[5, 6, null, 7]}\n          css={{alignItems: 'start', alignSelf: 'start'}}\n        >\n          <BorderBox\n            css={{gridArea: 'heading'}}\n            border={0}\n            borderBottom={1}\n            borderRadius={0}\n            pb={2}\n          >\n            <Heading>{title}</Heading>\n          </BorderBox>\n          {pageContext.tableOfContents.items ? (\n            <Position\n              display={['none', null, 'block']}\n              css={{gridArea: 'table-of-contents', overflow: 'auto'}}\n              position=\"sticky\"\n              top={HEADER_HEIGHT + 24}\n              maxHeight={`calc(100vh - ${HEADER_HEIGHT}px - 24px)`}\n            >\n              <Text display=\"inline-block\" fontWeight=\"bold\" mb={1}>\n                Table of contents\n              </Text>\n              <TableOfContents items={pageContext.tableOfContents.items} />\n            </Position>\n          ) : null}\n          <Box css={{gridArea: 'content'}}>\n            {status || source ? (\n              <Flex mb={3} alignItems=\"center\">\n                {status ? <StatusLabel status={status} /> : null}\n                <Box mx=\"auto\" />\n                {source ? <SourceLink href={source} /> : null}\n              </Flex>\n            ) : null}\n            {pageContext.tableOfContents.items ? (\n              <Box display={['block', null, 'none']} mb={3}>\n                <Details>\n                  {({open}) => (\n                    <>\n                      <Text as=\"summary\" fontWeight=\"bold\">\n                        {open ? (\n                          <ChevronDownIcon mr={2} />\n                        ) : (\n                          <ChevronRightIcon mr={2} />\n                        )}\n                        Table of contents\n                      </Text>\n                      <Box pt={1}>\n                        <TableOfContents\n                          items={pageContext.tableOfContents.items}\n                        />\n                      </Box>\n                    </>\n                  )}\n                </Details>\n              </Box>\n            ) : null}\n            {children}\n            <PageFooter\n              editUrl={pageContext.editUrl}\n              contributors={pageContext.contributors.concat(\n                additionalContributors.map((login) => ({login})),\n              )}\n            />\n          </Box>\n        </Grid>\n      </Flex>\n    </Flex>\n  )\n}\n\nexport default Layout\n"],"sourceRoot":""}